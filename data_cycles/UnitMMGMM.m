% MM and gaussian unit test
% for 5 key positions
[N T]=size(data_train);
nS=T/50;
%number of sequences
state=zeros(9,nS*10);
GMM_state={};
model=1;
for i=3:10:48
    h=1;
    for j=1:50:T % for all sequences
    state(:,h:h+9)=data_train(3:3:N,[j:j+9]);
    % GMM to learn the data
    h=h+10;
    end    
    obj = fitgmdist(state',9);
    GMM_state{model}=obj;
    model=model+1;
end


% example on how to  generate random data by this model 
% X = random(GMM_state{1},1000);


%% 
 % test new data to check if the model fits the new data and what is the
 % probability of the data being generated by this model

 
 % using the ML algo
% http://people.csail.mit.edu/dsontag/courses/ml12/slides/lecture21.pdf